//------------------------------------------------------------------------------
// <auto-generated>
//     This code was generated by a tool
//     Changes to this file will be lost if the code is regenerated.
// </auto-generated>
//------------------------------------------------------------------------------
using SourceProject;
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

public class Nation : INation {

    private IEnumerable<Unit> units;
    private IUnitFactory<Unit> unitFactory;
    private ENation nationType;

    public Nation(ENation nation, int unitNumber) {
        nationType = nation;

        switch(nationType) {
            case ENation.GAUL:
                unitFactory = new UnitFactory<GaulUnit>();
                break;

            case ENation.NAIN:
                unitFactory = new UnitFactory<NainUnit>();
                break;

            case ENation.VIKING:
                unitFactory = new UnitFactory<VikingUnit>();
                break;
        }

        units = unitFactory.getUnits(unitNumber);

    }

    public virtual int getUnitsNumber() {
        return units.Count();
    }

    public virtual IEnumerable<Unit> getUnits() {
        return units;
    }

    public virtual void deleteDeadUnits() {
        units = units.Where(u => u.isAlive());
    }

    public virtual Unit getUnit(int i) {
        return units.ElementAt(i);
    }

    public virtual void setInitBox(int line, int column) {
        foreach(Unit u in units) {
            u.move(line, column);
        }
    }

}

