//------------------------------------------------------------------------------
// <auto-generated>
//     This code was generated by a tool
//     Changes to this file will be lost if the code is regenerated.
// </auto-generated>
//------------------------------------------------------------------------------
using SourceProject;
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

public abstract class Map : IMap
{
	protected BoxFactory boxFactory;

    protected Wrapper.WrapperAlgo wrapperAlgo;

	protected Box[,] _map;

    public int Width
    {
        get;
        set;
    }

    public int Height
    {
        get;
        set;
    }

	public virtual void genererCarte()
	{
		throw new System.NotImplementedException();
	}

	public virtual void refreshMap()
	{
		throw new System.NotImplementedException();
	}

	public virtual void showMap()
	{
		throw new System.NotImplementedException();
	}

	public void setBox(Box box, int line, int column)
	{
        _map[line, column] = box;
	}

    public virtual Box getBox(int x, int y)
    {
        return _map[x, y];
    }

    public Box[,] getMap()
    {
        return _map;
    }

	public virtual void addNation(Nation nation)
	{
		throw new System.NotImplementedException();
	}

	public virtual IEnumerable<IEnumerable<int> > getInitCoordonates()
	{
		throw new System.NotImplementedException();
	}

	public Map()
	{
        wrapperAlgo = new Wrapper.WrapperAlgo();
        boxFactory = new BoxFactory();
	}

    /*
     * Convert a List<int> to a Box[,] according to the size of the map
    */
    protected void convertIntListToMap(List<int> l)
    {
        for(int line = 0; line<Height; line++)
        {
            for (int column = 0; column < Width; column++)
            {
                switch (l[line * Width + column])
                {
                    case (int)EBoxType.DESERT:
                        setBox(boxFactory.getBox(EBoxType.DESERT), line, column);
                        break;

                    case (int)EBoxType.FOREST:
                        setBox(boxFactory.getBox(EBoxType.FOREST), line, column);
                        break;

                    case (int)EBoxType.LOWLAND:
                        setBox(boxFactory.getBox(EBoxType.LOWLAND), line, column);
                        break;

                    case (int)EBoxType.MOUTAIN:
                        setBox(boxFactory.getBox(EBoxType.MOUTAIN), line, column);
                        break;

                    case (int)EBoxType.SEA:
                        setBox(boxFactory.getBox(EBoxType.SEA), line, column);
                        break;

                    default:
                        //TODO Error
                        break;  
                }
            }
        }
    }
}

